<div class="card">
  <p-dataview
    #dv
    [value]="authors()"
    [paginator]="!!authors().length"
    [rows]="rows"
    [totalRecords]="totalRecords"
    [first]="first"
    (onPage)="onPageChange($event)"
    emptyMessage=" "
  >
    <ng-template #header>
      <div class="flex items-center gap-2">
        <button
          pButton
          icon="pi pi-plus"
          label="Agregar"
          (click)="addAuthor()"
        ></button>
      </div>
    </ng-template>

    <ng-template #list let-items>
      <div class="grid grid-cols-12 gap-4 grid-nogutter">
        @for (author of items; track author.id) {
        <div
          class="col-span-12 flex flex-col sm:flex-row sm:items-center p-6 gap-4"
          [ngClass]="{
            'border-t border-surface-200 dark:border-surface-700': !first
          }"
        >
          <div class="md:w-40 relative">
            <img
              class="block xl:block mx-auto rounded-full w-full object-cover"
              [src]="author.photo"
              [alt]="author.name + ' ' + author.lastname"
              style="height: 150px; width: 150px"
            />
          </div>

          <div
            class="flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"
          >
            <div
              class="flex flex-row md:flex-col justify-between items-start gap-2"
            >
              <div>
                <span class="font-medium text-secondary text-sm">
                  Nacionalidad: {{ author.nationality }}
                </span>
                <div
                  class="text-lg font-medium text-surface-900 dark:text-surface-0 mt-2"
                >
                  {{ author.name }} {{ author.lastname }}
                </div>
              </div>
            </div>

            <div class="flex flex-col md:items-end gap-4">
              <span class="text-sm text-surface-500 dark:text-surface-400">
                Edad: {{ author.age }} a√±os
              </span>
            </div>
          </div>
        </div>
        } @empty { @for ( i of counterArray(8); track $index) {
        <div
          class="col-span-12 flex flex-col sm:flex-row sm:items-center p-6 gap-4"
          [ngClass]="{
            'border-t border-surface-200 dark:border-surface-700': !first
          }"
        >
          <div class="md:w-40 relative">
            <p-skeleton
              shape="circle"
              width="150px"
              height="150px"
              styleClass="block mx-auto"
            ></p-skeleton>
          </div>

          <div
            class="flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"
          >
            <div
              class="flex flex-row md:flex-col justify-between items-start gap-2"
            >
              <div>
                <p-skeleton
                  width="10rem"
                  height="1rem"
                  class="mb-2"
                ></p-skeleton>
                <p-skeleton width="12rem" height="1.5rem"></p-skeleton>
              </div>
            </div>

            <div class="flex flex-col md:items-end gap-4">
              <p-skeleton width="6rem" height="1rem"></p-skeleton>
            </div>
          </div>
        </div>

        } }
      </div>
    </ng-template>
  </p-dataview>
</div>
