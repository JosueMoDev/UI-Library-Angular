<div class="card">
  <p-dataview
    #dv
    [value]="allBooks.data()"
    layout="list"
    [paginator]="!!allBooks.data()"
    [rows]="rows"
    [totalRecords]="totalRecords"
    [first]="first"
    (onPage)="onPageChange($event)"
    emptyMessage=" "
  >
    <ng-template #header>
      <div class="flex justify-between gap-2">
        <p-selectbutton [allowEmpty]="false"> </p-selectbutton>
        <button
          pButton
          icon="pi pi-plus"
          label="Agregar"
          class="flex justify-items-end justify-self-end"
          (click)="handleDialogBook(undefined, 0, false, $event)"
          [loading]="allBooks.isLoading()"
          [disabled]="allBooks.isPending()"
        ></button>
      </div>
    </ng-template>

    <ng-template #list let-items>
      @for (book of items; track $index) {
      <book-layout
        [ngClass]="{
          'border-t border-surface-200 dark:border-surface-700': !true
        }"
        [book]="book"
      />
      }@empty { @if(!allBooks.isLoading() && !allBooks.data()?.length){
      <h1>No hay Libros que mostrar!</h1>
      } @else { @for ( i of counterArray(8); track $index) {
      <book-skeleton
        [isListLayout]="true"
        [ngClass]="{
          'border-t border-surface-200 dark:border-surface-700': !first
        }"
      />
      } } }
    </ng-template>
  </p-dataview>
</div>
